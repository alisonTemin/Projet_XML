<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Graphiques</title>
    <link rel="stylesheet/scss" type="text/scss" href="./css/graph.scss">
    <link rel="stylesheet" href="http://static.zinoui.com/1.5/themes/silver/zino.core.css">
    <link rel="stylesheet" href="http://static.zinoui.com/1.5/themes/silver/zino.chart.css">
    <script src="http://static.zinoui.com/1.5/compiled/zino.canvas.min.js"></script>
    <script src="http://static.zinoui.com/1.5/compiled/zino.svg.min.js"></script>
    <script src="http://static.zinoui.com/1.5/compiled/zino.chart.min.js"></script>
    <script src="http://static.zinoui.com/js/front.min.js"></script>
</head>
<body>
<figure>
    <figcaption>
        Nombre de projets par centre de recherche
    </figcaption>

    <div class="buttons"></div>
    <svg width="100" height="100" class="chart">
        <circle r="25" cx="50" cy="50" class="pie"/>
    </svg>
</figure>
<script>
    var total = 158,
        buttons = document.querySelector('.buttons'),
        pie = document.querySelector('.pie'),
        activeClass = 'active';

    var centres = {
        CR0001I: 10,
        CR0002O : 10,
        CR0003O: 0,
        CR0004Z: 0,
        CR0005N: 0,
        CR0006Z: 0,
        CR0007B: 0,
        CR0008I:0
    };

    // work out percentage as a result of total
    var numberFixer = function(num){
        var result = ((num * total) / 100);
        return result;
    }

    // create a button for each centre
    for(property in centres){
        var newEl = document.createElement('button');
        newEl.innerText = property;
        newEl.setAttribute('data-name', property);
        buttons.appendChild(newEl);
    }

    // when you click a button setPieChart and setActiveClass
    buttons.addEventListener('click', function(e){
        if(e.target != e.currentTarget){
            var el = e.target,
                name = el.getAttribute('data-name');
            setPieChart(name);
            setActiveClass(el);
        }
        e.stopPropagation();
    });

    var setPieChart = function(name){
        var number = centres[name],
            fixedNumber = numberFixer(number),
            result = fixedNumber + ' ' + total;

        pie.style.strokeDasharray = result;
    }

    var setActiveClass = function(el) {
        for(var i = 0; i < buttons.children.length; i++) {
            buttons.children[i].classList.remove(activeClass);
            el.classList.add(activeClass);
        }
    }

    // Set up default settings
    setPieChart('CR0001I');
    setActiveClass(buttons.children[0]);
</script>
<figure>
    <figcaption>
        Nombre de thèmes de recherche par centre de recherche
    </figcaption>

<div id="chart" class="zui-chart zui-chart-line"><svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" width="530" height="320"><defs><clipPath id="zinoui-1"><rect x="53" y="32" width="477" height="256" fill="none"></rect></clipPath></defs><desc>Created with Zino UI 1.5</desc><rect x="0" y="0" width="530" height="320" fill="#FFFFFF" stroke="none" stroke-width="0"></rect><g class="zui-chart-grid"><line x1="53" y1="32" x2="53" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="132.5" y1="32" x2="132.5" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="212" y1="32" x2="212" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="291.5" y1="32" x2="291.5" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="371" y1="32" x2="371" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="450.5" y1="32" x2="450.5" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="530" y1="32" x2="530" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="53" y1="32" x2="530" y2="32" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="53" y1="288" x2="530" y2="288" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="53" y1="202.67" x2="530" y2="202.67" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="53" y1="117.33" x2="530" y2="117.33" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line><line x1="53" y1="32" x2="530" y2="32" fill="none" shape-rendering="crispEdges" stroke="#ccc" stroke-dasharray="5,2" stroke-width="1"></line></g><g class="zui-chart-axis-x"><line x1="53" y1="289" x2="53" y2="293" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="132.5" y1="289" x2="132.5" y2="293" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="212" y1="289" x2="212" y2="293" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="291.5" y1="289" x2="291.5" y2="293" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="371" y1="289" x2="371" y2="293" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="450.5" y1="289" x2="450.5" y2="293" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="530" y1="289" x2="530" y2="293" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line></g><g class="zui-chart-axis-y"><line x1="49" y1="288" x2="53" y2="288" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="49" y1="202.67" x2="53" y2="202.67" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="49" y1="117.33" x2="53" y2="117.33" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line><line x1="49" y1="32" x2="53" y2="32" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></line></g><g class="zui-chart-labels zui-chart-labels-y"><text x="43" y="288" fill="#444" font-family="Arial" font-size="12px" text-anchor="end"><tspan alignment-baseline="middle">3</tspan></text><text x="43" y="202.67" fill="#444" font-family="Arial" font-size="12px" text-anchor="end"><tspan alignment-baseline="middle">4</tspan></text><text x="43" y="117.33" fill="#444" font-family="Arial" font-size="12px" text-anchor="end"><tspan alignment-baseline="middle">5</tspan></text><text x="43" y="32" fill="#444" font-family="Arial" font-size="12px" text-anchor="end"><tspan alignment-baseline="middle">6</tspan></text></g><g class="zui-chart-labels zui-chart-labels-x"><text x="92.75" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0001I</text><text x="172.25" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0002O</text><text x="251.75" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0003O</text><text x="331.25" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0004Z</text><text x="410.75" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0005N</text><text x="490.25" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0006Z</text><text x="569.75" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0007B</text><text x="645.25" y="308" fill="#444" font-family="Arial" font-size="12px" text-anchor="middle">CR0008I</text></g><g class="zui-chart-axis"><polyline points="53,32 53,288 530,288" fill="none" shape-rendering="crispEdges" stroke="#444" stroke-width="1"></polyline></g><g class="zui-chart-canvas" clip-path="url(#zinoui-1)"><path d="M92.75,288.00L172.25,117.33L251.75,202.67L331.25,117.33L410.75,32.00L490.25,117.33" fill="none" fill-opacity="1" stroke="#DC3912" stroke-width="2" style="stroke-dasharray: 3000,3000"></path><circle cx="92.75" cy="288.00" r="4" fill="#FFFFFF" stroke="#DC3912" stroke-width="2" tooltip="Miami Heat"></circle><circle cx="172.25" cy="117.33" r="4" fill="#FFFFFF" stroke="#DC3912" stroke-width="2" tooltip="Miami Heat"></circle><circle cx="251.75" cy="202.67" r="4" fill="#FFFFFF" stroke="#DC3912" stroke-width="2" tooltip="Miami Heat"></circle><circle cx="331.25" cy="117.33" r="4" fill="#FFFFFF" stroke="#DC3912" stroke-width="2" tooltip="Miami Heat"></circle><circle cx="410.75" cy="32.00" r="4" fill="#FFFFFF" stroke="#DC3912" stroke-width="2" tooltip="Miami Heat"></circle><circle cx="490.25" cy="117.33" r="4" fill="#FFFFFF" stroke="#DC3912" stroke-width="2" tooltip="Miami Heat"></circle></g></svg></div>

    <script type="text/javascript">
        $(function () {
            $("#chart").zinoChart({
                type: "line",
                width: 530,
                height: 320,
                tooltip: false,
                legend: false,
                categories: [{
                    'category': [
                        {'label': 'CR0001I'},
                        {'label': 'CR0002O'},
                        {'label': 'CR0003O'},
                        {'label': 'CR0004Z'},
                        {'label': 'CR0005N'},
                        {'label': 'CR0006Z'},
                        {'label': 'CR0007B'},
                        {'label': 'CR0008I'}
                    ]
                }],
                series: [{
                    'color': '#DC3912',
                    'data': [
                        {'value': 3},
                        {'value': 5},
                        {'value': 4},
                        {'value': 5},
                        {'value': 6},
                        {'value': 5},
                        {'value': 5},
                        {'value': 4}
                    ]
                }]
            });
        });
    </script>

    <figure>
        <figcaption>
            Nombre des différentes catégories professionnelles des personnels d'équipe par centre de recherche
        </figcaption>



</body>

</html>